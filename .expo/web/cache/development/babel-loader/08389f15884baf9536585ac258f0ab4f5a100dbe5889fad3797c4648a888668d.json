{"ast":null,"code":"import * as React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Swiper from './Swiper';\nimport Month from './Month';\nimport { areDatesOnSameDay, dateToUnix, getEndOfDay, getInitialIndex } from './dateUtils';\nimport CalendarHeader from './CalendarHeader';\nimport { useCallback, useMemo } from 'react';\nimport YearPicker from './YearPicker';\nimport Color from 'color';\nimport { useTheme } from 'react-native-paper';\nimport { useLatest, lightenBy, darkenBy } from '../utils';\nfunction Calendar(props) {\n  const {\n    locale,\n    mode,\n    onChange,\n    startDate,\n    endDate,\n    date,\n    disableWeekDays,\n    startYear,\n    endYear,\n    dates,\n    validRange,\n    dateMode\n  } = props;\n  const theme = useTheme();\n  const selectColor = useMemo(() => {\n    if (theme.isV3) {\n      return theme.colors.primaryContainer;\n    }\n    if (theme.dark) {\n      return darkenBy(Color(theme.colors.primary), 0.1).hex();\n    }\n    return lightenBy(Color(theme.colors.primary), 0.9).hex();\n  }, [theme]);\n  const scrollMode = mode === 'range' || mode === 'multiple' ? 'vertical' : 'horizontal';\n  const [selectedYear, setSelectedYear] = React.useState(undefined);\n  const [selectingYear, setSelectingYear] = React.useState(false);\n  const onPressYear = useCallback(year => {\n    setSelectedYear(year);\n    setSelectingYear(prev => !prev);\n  }, [setSelectingYear]);\n  const startDateRef = useLatest(startDate);\n  const endDateRef = useLatest(endDate);\n  const onChangeRef = useLatest(onChange);\n  const datesRef = useLatest(dates);\n  const onPressDate = useCallback(d => {\n    if (mode === 'single') {\n      ;\n      onChangeRef.current({\n        date: dateMode === 'start' ? d : getEndOfDay(d)\n      });\n    } else if (mode === 'range') {\n      const sd = startDateRef.current;\n      const ed = endDateRef.current;\n      let isStart = true;\n      if (sd && !ed && dateToUnix(d) >= dateToUnix(sd)) {\n        isStart = false;\n      }\n      ;\n      onChangeRef.current({\n        startDate: isStart ? d : sd,\n        endDate: !isStart ? getEndOfDay(d) : undefined\n      });\n    } else if (mode === 'multiple') {\n      datesRef.current = datesRef.current || [];\n      const exists = datesRef.current.some(ed => areDatesOnSameDay(ed, d));\n      const newDates = exists ? datesRef.current.filter(ed => !areDatesOnSameDay(ed, d)) : [...datesRef.current, d];\n      newDates.sort((a, b) => a.getTime() - b.getTime());\n      onChangeRef.current({\n        dates: newDates,\n        datePressed: d,\n        change: exists ? 'removed' : 'added'\n      });\n    }\n  }, [mode, dateMode, onChangeRef, startDateRef, endDateRef, datesRef]);\n  const firstDate = startDate || date || (dates === null || dates === void 0 ? void 0 : dates[0]);\n  return React.createElement(View, {\n    style: styles.root\n  }, React.createElement(Swiper, {\n    initialIndex: getInitialIndex(firstDate),\n    selectedYear: selectedYear,\n    scrollMode: scrollMode,\n    renderItem: _ref => {\n      let {\n        index\n      } = _ref;\n      return React.createElement(Month, {\n        locale: locale,\n        mode: mode,\n        key: index,\n        validRange: validRange,\n        index: index,\n        startDate: startDate,\n        endDate: endDate,\n        date: date,\n        dates: dates,\n        onPressYear: onPressYear,\n        selectingYear: selectingYear,\n        onPressDate: onPressDate,\n        scrollMode: scrollMode,\n        primaryColor: theme.colors.primary,\n        selectColor: selectColor,\n        roundness: theme.roundness,\n        disableWeekDays: disableWeekDays\n      });\n    },\n    renderHeader: _ref2 => {\n      let {\n        onPrev,\n        onNext\n      } = _ref2;\n      return React.createElement(CalendarHeader, {\n        locale: locale,\n        onPrev: onPrev,\n        onNext: onNext,\n        scrollMode: scrollMode,\n        disableWeekDays: disableWeekDays\n      });\n    }\n  }), scrollMode === 'horizontal' ? React.createElement(YearPicker, {\n    selectedYear: selectedYear,\n    selectingYear: selectingYear,\n    onPressYear: onPressYear,\n    startYear: startYear || 1800,\n    endYear: endYear || 2200\n  }) : null);\n}\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1\n  },\n  viewPager: {\n    flex: 1\n  }\n});\nexport default React.memo(Calendar);","map":{"version":3,"names":["React","StyleSheet","View","Swiper","Month","areDatesOnSameDay","dateToUnix","getEndOfDay","getInitialIndex","CalendarHeader","useCallback","useMemo","YearPicker","Color","useTheme","useLatest","lightenBy","darkenBy","Calendar","props","locale","mode","onChange","startDate","endDate","date","disableWeekDays","startYear","endYear","dates","validRange","dateMode","theme","selectColor","isV3","colors","primaryContainer","dark","primary","hex","scrollMode","selectedYear","setSelectedYear","useState","undefined","selectingYear","setSelectingYear","onPressYear","year","prev","startDateRef","endDateRef","onChangeRef","datesRef","onPressDate","d","current","sd","ed","isStart","exists","some","newDates","filter","sort","a","b","getTime","datePressed","change","firstDate","createElement","style","styles","root","initialIndex","renderItem","_ref","index","key","primaryColor","roundness","renderHeader","_ref2","onPrev","onNext","create","flex","viewPager","memo"],"sources":["C:\\Users\\LAPTOP HUU PHUONG\\Desktop\\THcuoiky_react\\THcuoiky\\BaiTapReactNativeTuan7Bai1-master\\node_modules\\react-native-paper-dates\\src\\Date\\Calendar.tsx"],"sourcesContent":["import * as React from 'react'\nimport { StyleSheet, View } from 'react-native'\nimport Swiper from './Swiper'\nimport Month from './Month'\nimport {\n  areDatesOnSameDay,\n  dateToUnix,\n  DisableWeekDaysType,\n  getEndOfDay,\n  getInitialIndex,\n} from './dateUtils'\n\nimport CalendarHeader from './CalendarHeader'\nimport { useCallback, useMemo } from 'react'\nimport YearPicker from './YearPicker'\nimport Color from 'color'\nimport { useTheme } from 'react-native-paper'\nimport { useLatest, lightenBy, darkenBy } from '../utils'\n\nexport type ModeType = 'single' | 'range' | 'multiple'\n\nexport type ScrollModeType = 'horizontal' | 'vertical'\n\nexport type ValidRangeType = {\n  startDate?: Date\n  endDate?: Date\n  disabledDates?: Date[]\n}\n\nexport type BaseCalendarProps = {\n  locale: string\n  disableWeekDays?: DisableWeekDaysType\n  validRange?: ValidRangeType\n  startYear?: number\n  endYear?: number\n\n  // here they are optional but in final implementation they are required\n  date?: CalendarDate\n  dates?: CalendarDates\n  startDate?: CalendarDate\n  endDate?: CalendarDate\n  dateMode?: 'start' | 'end'\n}\n\nexport type CalendarDate = Date | undefined\nexport type CalendarDates = Date[] | undefined | null\n\nexport type RangeChange = (params: {\n  startDate: CalendarDate\n  endDate: CalendarDate\n}) => any\n\nexport type SingleChange = (params: { date: CalendarDate }) => void\n\nexport type MultiChange = (params: {\n  dates: CalendarDates\n  datePressed: Date\n  change: 'added' | 'removed'\n}) => any\n\nexport type MultiConfirm = (params: { dates: Date[] }) => void\n\nexport interface CalendarSingleProps extends BaseCalendarProps {\n  mode: 'single'\n  date: CalendarDate\n  onChange: SingleChange\n}\n\nexport interface CalendarRangeProps extends BaseCalendarProps {\n  mode: 'range'\n  startDate: CalendarDate\n  endDate: CalendarDate\n  onChange: RangeChange\n}\n\nexport interface CalendarMultiProps extends BaseCalendarProps {\n  mode: 'multiple'\n  dates: CalendarDates\n  onChange: MultiChange\n}\n\nfunction Calendar(\n  props: CalendarSingleProps | CalendarRangeProps | CalendarMultiProps\n) {\n  const {\n    locale,\n    mode,\n    onChange,\n    startDate,\n    endDate,\n    date,\n    disableWeekDays,\n    startYear,\n    endYear,\n    dates,\n    validRange,\n    dateMode,\n  } = props\n\n  const theme = useTheme()\n\n  const selectColor = useMemo<string>(() => {\n    if (theme.isV3) {\n      return theme.colors.primaryContainer\n    }\n    if (theme.dark) {\n      return darkenBy(Color(theme.colors.primary), 0.1).hex()\n    }\n    return lightenBy(Color(theme.colors.primary), 0.9).hex()\n  }, [theme])\n\n  const scrollMode =\n    mode === 'range' || mode === 'multiple' ? 'vertical' : 'horizontal'\n\n  const [selectedYear, setSelectedYear] = React.useState<number | undefined>(\n    undefined\n  )\n  const [selectingYear, setSelectingYear] = React.useState<boolean>(false)\n  const onPressYear = useCallback(\n    (year: number) => {\n      setSelectedYear(year)\n      setSelectingYear((prev) => !prev)\n    },\n    [setSelectingYear]\n  )\n\n  // prevent re-rendering all months when something changed we only need the\n  // latest version of the props and we don't want the useCallback to change\n  const startDateRef = useLatest<CalendarDate>(startDate)\n  const endDateRef = useLatest<CalendarDate>(endDate)\n  const onChangeRef = useLatest<RangeChange | SingleChange | MultiChange>(\n    onChange\n  )\n  const datesRef = useLatest<CalendarDates>(dates)\n\n  const onPressDate = useCallback(\n    (d: Date) => {\n      if (mode === 'single') {\n        ;(onChangeRef.current as SingleChange)({\n          date: dateMode === 'start' ? d : getEndOfDay(d),\n        })\n      } else if (mode === 'range') {\n        const sd = startDateRef.current\n        const ed = endDateRef.current\n        let isStart: boolean = true\n        if (sd && !ed && dateToUnix(d) >= dateToUnix(sd!)) {\n          isStart = false\n        }\n        ;(onChangeRef.current as RangeChange)({\n          startDate: isStart ? d : sd,\n          endDate: !isStart ? getEndOfDay(d) : undefined,\n        })\n      } else if (mode === 'multiple') {\n        datesRef.current = datesRef.current || []\n        const exists = datesRef.current.some((ed) => areDatesOnSameDay(ed, d))\n\n        const newDates = exists\n          ? datesRef.current.filter((ed) => !areDatesOnSameDay(ed, d))\n          : [...datesRef.current, d]\n\n        newDates.sort((a, b) => a.getTime() - b.getTime())\n        ;(onChangeRef.current as MultiChange)({\n          dates: newDates,\n          datePressed: d,\n          change: exists ? 'removed' : 'added',\n        })\n      }\n    },\n    [mode, dateMode, onChangeRef, startDateRef, endDateRef, datesRef]\n  )\n\n  const firstDate = startDate || date || dates?.[0]\n\n  return (\n    <View style={styles.root}>\n      <Swiper\n        initialIndex={getInitialIndex(firstDate)}\n        selectedYear={selectedYear}\n        scrollMode={scrollMode}\n        renderItem={({ index }) => (\n          <Month\n            locale={locale}\n            mode={mode}\n            key={index}\n            validRange={validRange}\n            index={index}\n            startDate={startDate}\n            endDate={endDate}\n            date={date}\n            dates={dates}\n            onPressYear={onPressYear}\n            selectingYear={selectingYear}\n            onPressDate={onPressDate}\n            scrollMode={scrollMode}\n            primaryColor={theme.colors.primary}\n            selectColor={selectColor}\n            roundness={theme.roundness}\n            disableWeekDays={disableWeekDays}\n          />\n        )}\n        renderHeader={({ onPrev, onNext }) => (\n          <CalendarHeader\n            locale={locale}\n            onPrev={onPrev}\n            onNext={onNext}\n            scrollMode={scrollMode}\n            disableWeekDays={disableWeekDays}\n          />\n        )}\n      />\n      {scrollMode === 'horizontal' ? (\n        <YearPicker\n          selectedYear={selectedYear}\n          selectingYear={selectingYear}\n          onPressYear={onPressYear}\n          startYear={startYear || 1800}\n          endYear={endYear || 2200}\n        />\n      ) : null}\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  root: { flex: 1 },\n  viewPager: { flex: 1 },\n})\n\nexport default React.memo(Calendar)\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}